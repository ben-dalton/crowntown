<head>
<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="https://maps.google.com/maps/api/js?key=AIzaSyAJRltFVdEfQpL4elY_WOoOpyhKrZaT-iU&libraries=geometry" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function(){
      var geocoder, userLocation, serviceArea, service, distancesFromSite, npaData, npa339, npa388, npa315, npa378, newCoords339, newCoords388, newCoords378, newCoords315, address;
      npaData={type:"FeatureCollection",features:[{type:"Feature",properties:{id:315,p1:546,p2:36,p3:240,p4:85.1,p5:1.4,p7:100,p8:87.4,p9:9.2,p10:1.3,p11:.9,p12:0,p13:2.7,e1:89,e3:0,e5:1,e7:0,m1:40395,m2:13,m3:31.3,m4:7.9,m5:5.4,m6:446034,m7:3502,m9:1955,s1:1465,s2:19048,s3:0,s4:.103,s5:72,k1:2,k2:1,k3:33.3,k4:0,k5:42.9,k6:0,k7:0,k8:0,k9:27.5,k10:0,k11:8.6,k12:0,k13:45,h1:0,h2:0,h3:4,h4:82,h5:43.1,h6:43.1,h7:100,h8:100,g1:320,g2:9,g3:1946,g4:1519,g5:0,g6:13,g7:210226,g8:5.4,g9:0,g10:7.1,g11:25.3,g12:10.9,g13:673,g14:1,g15:77,g17:58.9,w1:69.9,w2:34,w3:165,w4:1.6,w5:80.6,w6:1.3,w7:24.9,w8:42,w9:46.1,w18:75,w10:45.9,w11:62.5,w14:4.5,w15:2.4,w17:981,w16:43},geometry:{type:"MultiPolygon",coordinates:[[[[-80.809925,35.216418],[-80.810211,35.216568],[-80.811057,35.21701],[-80.811484,35.217215],[-80.811686,35.217304],[-80.811741,35.217328],[-80.811956,35.217411],[-80.812207,35.21751],[-80.812711,35.217649],[-80.813178,35.217742],[-80.81362,35.217798],[-80.814057,35.21783],[-80.814525,35.217842],[-80.81517,35.217852],[-80.815557,35.217862],[-80.815593,35.218043],[-80.816017,35.21923],[-80.816593,35.220842],[-80.816644,35.220928],[-80.8153,35.220677],[-80.8141,35.220447],[-80.813869,35.220415],[-80.813752,35.220405],[-80.813594,35.220399],[-80.813417,35.220392],[-80.812258,35.220334],[-80.812172,35.22033],[-80.810836,35.220264],[-80.809491,35.220206],[-80.809319,35.220195],[-80.808528,35.220145],[-80.808118,35.220117],[-80.807954,35.220102],[-80.806724,35.219991],[-80.804071,35.219751],[-80.803331,35.219683],[-80.802696,35.219625],[-80.80207,35.219568],[-80.801627,35.219527],[-80.800576,35.219428],[-80.800146,35.219388],[-80.799229,35.219303],[-80.798128,35.2192],[-80.797889,35.21916],[-80.797672,35.219108],[-80.79755,35.219071],[-80.796928,35.218859],[-80.796184,35.218605],[-80.795706,35.21844],[-80.795515,35.218374],[-80.795558,35.218285],[-80.795614,35.218187],[-80.795684,35.218022],[-80.79573,35.217868],[-80.795818,35.217662],[-80.795932,35.217436],[-80.796093,35.217148],[-80.796164,35.216996],[-80.796205,35.216881],[-80.796265,35.216762],[-80.796292,35.216684],[-80.796335,35.216587],[-80.79637,35.216531],[-80.7964,35.216496],[-80.796555,35.216362],[-80.796603,35.216312],[-80.796627,35.216278],[-80.796661,35.216222],[-80.796986,35.215686],[-80.797085,35.215555],[-80.797173,35.215416],[-80.79724,35.21534],[-80.797354,35.215234],[-80.797429,35.215145],[-80.797491,35.215058],[-80.797501,35.215032],[-80.797509,35.214914],[-80.79753,35.214862],[-80.79755,35.214832],[-80.797597,35.214782],[-80.797758,35.214632],[-80.797831,35.214532],[-80.797895,35.214388],[-80.797919,35.214344],[-80.79796,35.214298],[-80.798066,35.214219],[-80.79815,35.214144],[-80.798208,35.2141],[-80.798395,35.213989],[-80.798441,35.213946],[-80.798458,35.213922],[-80.798495,35.213836],[-80.798547,35.213771],[-80.798646,35.213684],[-80.798729,35.213635],[-80.798775,35.213616],[-80.798997,35.2134],[-80.799132,35.213243],[-80.79919,35.213202],[-80.799567,35.212986],[-80.799616,35.212964],[-80.79966,35.212952],[-80.799688,35.212938],[-80.799735,35.212897],[-80.799869,35.212806],[-80.799919,35.212773],[-80.799971,35.212745],[-80.800095,35.212701],[-80.800207,35.212654],[-80.800292,35.212602],[-80.800393,35.212542],[-80.800497,35.212474],[-80.800536,35.212443],[-80.800602,35.212353],[-80.800636,35.212287],[-80.800743,35.212045],[-80.800784,35.211914],[-80.800855,35.211755],[-80.800884,35.21166],[-80.800917,35.211521],[-80.80093,35.211395],[-80.800908,35.211276],[-80.800847,35.211111],[-80.800891,35.210878],[-80.800918,35.210811],[-80.801035,35.210616],[-80.801076,35.210575],[-80.801451,35.211154],[-80.801606,35.211373],[-80.801812,35.211645],[-80.801916,35.211763],[-80.80197,35.211821],[-80.802051,35.211907],[-80.8022,35.212057],[-80.802439,35.212283],[-80.802664,35.212466],[-80.802893,35.212637],[-80.803157,35.212823],[-80.803245,35.212886],[-80.803304,35.212928],[-80.805161,35.213904],[-80.80654,35.214628],[-80.808218,35.215509],[-80.808524,35.21567],[-80.808981,35.21591],[-80.809925,35.216418]]]]}},{type:"Feature",properties:{id:378,p1:3993,p2:37,p3:915,p4:96.1,p5:2.3,p7:100,p8:86.2,p9:8.3,p10:1.6,p11:1.1,p12:0,p13:3.2,e1:88.3,e3:8,e5:1,e7:0,m1:81074,m2:9,m3:38.5,m4:5.6,m5:4.9,m6:754709,m7:4150,m9:1959,s1:200,s2:3757,s3:344,s4:.023,s5:299,k1:2,k2:2,k3:82.3,k4:80.9,k5:91.3,k6:76,k7:62.8,k8:58.8,k9:6.7,k10:4.4,k11:4.4,k12:26.7,k13:17,h1:1.5,h2:0,h3:3.9,h4:77,h5:19.7,h6:39.7,h7:100,h8:64.8,g1:2105,g2:55,g3:1951,g4:1776,g5:4,g6:67,g7:282587,g8:4.9,g9:.7,g10:8,g11:17,g12:.3,g13:843,g14:7,g15:307,g17:71.4,w1:83.3,w2:19.3,w3:227,w4:1.9,w5:58.7,w6:1.4,w7:18.9,w8:26,w9:65.5,w18:78.1,w10:41.3,w11:60.7,w14:5.5,w15:25.1,w17:1034,w16:53},geometry:{type:"MultiPolygon",coordinates:[[[[-80.801843,35.231596],[-80.801649,35.231725],[-80.800923,35.231945],[-80.800409,35.232107],[-80.800021,35.232223],[-80.799152,35.232492],[-80.79895,35.23255],[-80.7989,35.232572],[-80.798863,35.232608],[-80.798853,35.232627],[-80.798844,35.232673],[-80.79887,35.232794],[-80.798901,35.232888],[-80.798944,35.232972],[-80.798977,35.233021],[-80.799015,35.233068],[-80.799103,35.233155],[-80.799153,35.233193],[-80.799254,35.233258],[-80.799339,35.233299],[-80.799287,35.233353],[-80.799208,35.233414],[-80.798286,35.233907],[-80.797439,35.23437],[-80.797295,35.234459],[-80.796568,35.234947],[-80.796318,35.234698],[-80.79581,35.234178],[-80.795249,35.233599],[-80.794676,35.2338],[-80.794576,35.233849],[-80.794508,35.233893],[-80.79442,35.233971],[-80.794332,35.234076],[-80.794235,35.234219],[-80.794158,35.234307],[-80.794121,35.23434],[-80.794052,35.23439],[-80.793989,35.234421],[-80.793936,35.234442],[-80.793181,35.234655],[-80.792921,35.234733],[-80.792072,35.234976],[-80.791903,35.235034],[-80.791277,35.235224],[-80.790902,35.235338],[-80.790806,35.235375],[-80.790639,35.235326],[-80.790373,35.235232],[-80.790079,35.235121],[-80.789228,35.234813],[-80.789113,35.234777],[-80.789005,35.234748],[-80.788911,35.234728],[-80.788696,35.234703],[-80.788415,35.234688],[-80.788211,35.234701],[-80.788085,35.234716],[-80.787938,35.234742],[-80.787776,35.23478],[-80.787647,35.23482],[-80.7874,35.234913],[-80.787313,35.234947],[-80.787073,35.235053],[-80.786167,35.23546],[-80.786139,35.235472],[-80.785998,35.235468],[-80.785944,35.235467],[-80.785189,35.235469],[-80.784994,35.235466],[-80.78463,35.235459],[-80.784439,35.235443],[-80.784091,35.235408],[-80.78391,35.235386],[-80.783598,35.235324],[-80.783452,35.235289],[-80.783459,35.235231],[-80.783443,35.235017],[-80.783408,35.234725],[-80.783387,35.234627],[-80.78334,35.234463],[-80.783229,35.234189],[-80.783162,35.234054],[-80.783051,35.233862],[-80.78303,35.233816],[-80.783,35.23371],[-80.782985,35.233593],[-80.782986,35.233535],[-80.782998,35.233441],[-80.78303,35.233353],[-80.783053,35.233312],[-80.78316,35.233157],[-80.782671,35.232702],[-80.782631,35.232655],[-80.782567,35.232554],[-80.782542,35.2325],[-80.782509,35.232389],[-80.78246,35.232021],[-80.782457,35.231953],[-80.782468,35.231816],[-80.782501,35.23168],[-80.782547,35.23158],[-80.782647,35.231404],[-80.783235,35.230498],[-80.783118,35.230432],[-80.782835,35.230299],[-80.782524,35.230165],[-80.782361,35.230099],[-80.782217,35.230044],[-80.782183,35.230032],[-80.782233,35.229938],[-80.782275,35.229854],[-80.782302,35.229788],[-80.782323,35.229723],[-80.78234,35.229642],[-80.782356,35.229542],[-80.782383,35.229437],[-80.782389,35.229384],[-80.782384,35.229263],[-80.782362,35.229086],[-80.782362,35.229032],[-80.782385,35.228935],[-80.782426,35.228837],[-80.78245,35.228771],[-80.782468,35.22874],[-80.782498,35.228711],[-80.782531,35.228689],[-80.782859,35.228519],[-80.782896,35.228488],[-80.78298,35.228384],[-80.783064,35.22829],[-80.783117,35.228243],[-80.783162,35.228209],[-80.783413,35.228043],[-80.783448,35.228009],[-80.783495,35.227945],[-80.783519,35.227919],[-80.783563,35.227888],[-80.78366,35.227834],[-80.783881,35.227739],[-80.783947,35.227713],[-80.784086,35.227659],[-80.784281,35.227601],[-80.784487,35.22755],[-80.784668,35.227524],[-80.784878,35.227521],[-80.785146,35.227541],[-80.785322,35.22754],[-80.785392,35.22753],[-80.78565,35.227499],[-80.785741,35.227493],[-80.785901,35.227465],[-80.786183,35.227455],[-80.786294,35.227439],[-80.786456,35.2274],[-80.786666,35.227389],[-80.786818,35.227349],[-80.786932,35.227324],[-80.786985,35.227321],[-80.787102,35.227327],[-80.787356,35.227326],[-80.787396,35.227323],[-80.787477,35.227308],[-80.78755,35.227288],[-80.787611,35.227277],[-80.787874,35.227252],[-80.788071,35.227208],[-80.788256,35.227174],[-80.788394,35.227161],[-80.788631,35.227156],[-80.788679,35.227148],[-80.788718,35.227136],[-80.788758,35.227111],[-80.788818,35.227058],[-80.788882,35.226978],[-80.789042,35.226869],[-80.789096,35.22682],[-80.789134,35.226776],[-80.789171,35.226708],[-80.789219,35.226471],[-80.789218,35.226433],[-80.789228,35.22638],[-80.789271,35.226263],[-80.789308,35.22621],[-80.789328,35.226172],[-80.789356,35.226135],[-80.789391,35.226107],[-80.78945,35.226071],[-80.789517,35.226047],[-80.789587,35.226029],[-80.7897,35.226013],[-80.789769,35.226007],[-80.789923,35.226008],[-80.790065,35.225988],[-80.790279,35.225936],[-80.790378,35.225916],[-80.790484,35.225913],[-80.790568,35.225893],[-80.790595,35.225868],[-80.790628,35.225846],[-80.790659,35.225834],[-80.790732,35.225826],[-80.790769,35.225805],[-80.790804,35.225775],[-80.790861,35.225742],[-80.790921,35.225714],[-80.791127,35.22563],[-80.791278,35.225593],[-80.791344,35.225568],[-80.791422,35.225528],[-80.791459,35.225501],[-80.791543,35.225412],[-80.79163,35.225328],[-80.791658,35.225292],[-80.791673,35.225262],[-80.791676,35.225178],[-80.791684,35.22516],[-80.791706,35.225148],[-80.791741,35.225121],[-80.79175,35.225104],[-80.791769,35.224985],[-80.791791,35.224941],[-80.791826,35.224886],[-80.791878,35.224817],[-80.791987,35.224698],[-80.792091,35.224609],[-80.792142,35.224553],[-80.792159,35.224526],[-80.792191,35.224414],[-80.792238,35.224334],[-80.792349,35.224207],[-80.792465,35.224103],[-80.792501,35.224062],[-80.792518,35.224016],[-80.792536,35.223831],[-80.79255,35.223759],[-80.792599,35.223622],[-80.792629,35.223566],[-80.79268,35.223487],[-80.792688,35.22347],[-80.792722,35.223397],[-80.792746,35.223333],[-80.792776,35.22323],[-80.792915,35.222867],[-80.792999,35.222608],[-80.793022,35.222527],[-80.793079,35.222271],[-80.793092,35.222171],[-80.793103,35.22212],[-80.793133,35.222072],[-80.793153,35.222051],[-80.793173,35.222034],[-80.793218,35.222005],[-80.793354,35.221938],[-80.793428,35.221899],[-80.793521,35.221852],[-80.793555,35.221818],[-80.793571,35.221775],[-80.793572,35.221751],[-80.793577,35.221705],[-80.793577,35.221666],[-80.793578,35.221616],[-80.793577,35.221553],[-80.793589,35.221487],[-80.793641,35.221363],[-80.793772,35.220996],[-80.793938,35.220562],[-80.793994,35.220439],[-80.794087,35.2202],[-80.794114,35.22014],[-80.794125,35.220097],[-80.794132,35.220004],[-80.794141,35.219977],[-80.794172,35.219926],[-80.794393,35.219712],[-80.794496,35.219598],[-80.794779,35.219219],[-80.794839,35.219148],[-80.794911,35.219077],[-80.794994,35.218983],[-80.795073,35.218904],[-80.795183,35.218828],[-80.795252,35.218763],[-80.795405,35.218533],[-80.795478,35.218449],[-80.795515,35.218374],[-80.795706,35.21844],[-80.796184,35.218605],[-80.796928,35.218859],[-80.79755,35.219071],[-80.797672,35.219108],[-80.797889,35.21916],[-80.798128,35.2192],[-80.799229,35.219303],[-80.800146,35.219388],[-80.800576,35.219428],[-80.801627,35.219527],[-80.80207,35.219568],[-80.802696,35.219625],[-80.803331,35.219683],[-80.804071,35.219751],[-80.806724,35.219991],[-80.807954,35.220102],[-80.808118,35.220117],[-80.808528,35.220145],[-80.809319,35.220195],[-80.809491,35.220206],[-80.810836,35.220264],[-80.812172,35.22033],[-80.812258,35.220334],[-80.813417,35.220392],[-80.813594,35.220399],[-80.813752,35.220405],[-80.813869,35.220415],[-80.8141,35.220447],[-80.8153,35.220677],[-80.816644,35.220928],[-80.817044,35.221009],[-80.817721,35.221151],[-80.818091,35.221233],[-80.818494,35.22131],[-80.818551,35.221321],[-80.818446,35.221739],[-80.818375,35.222077],[-80.818347,35.222268],[-80.81833,35.222356],[-80.818265,35.222578],[-80.818225,35.222688],[-80.818153,35.222859],[-80.818117,35.22293],[-80.817996,35.223118],[-80.817889,35.223269],[-80.817755,35.223424],[-80.81756,35.223619],[-80.817351,35.223802],[-80.81696,35.22412],[-80.816319,35.224652],[-80.815323,35.225472],[-80.814364,35.226275],[-80.813558,35.226941],[-80.813363,35.227127],[-80.813184,35.227325],[-80.813048,35.227493],[-80.81293,35.227659],[-80.812817,35.227851],[-80.812488,35.228454],[-80.812047,35.229288],[-80.811976,35.22947],[-80.81197,35.229514],[-80.811947,35.229678],[-80.811691,35.230613],[-80.811548,35.231124],[-80.811212,35.232367],[-80.811147,35.232577],[-80.811067,35.232901],[-80.810359,35.232813],[-80.809206,35.232662],[-80.809033,35.232642],[-80.808826,35.23263],[-80.80862,35.232636],[-80.808517,35.232645],[-80.808214,35.232686],[-80.808049,35.232716],[-80.807975,35.232736],[-80.807771,35.232822],[-80.807853,35.23245],[-80.807558,35.23242],[-80.806886,35.232327],[-80.8065,35.232279],[-80.80625,35.232244],[-80.805766,35.232177],[-80.803982,35.231938],[-80.803801,35.231912],[-80.80294,35.231795],[-80.802135,35.231685],[-80.802067,35.231673],[-80.801936,35.231636],[-80.801843,35.231596]]]]}},{type:"Feature",properties:{id:339,p1:666,p2:29,p3:254,p4:82,p5:3.5,p7:100,p8:75.4,p9:15.6,p10:6.9,p11:.6,p12:0,p13:5,e1:55.2,e3:0,e5:0,e7:.39,m1:41995,m2:28.3,m3:35.7,m4:7.5,m5:2.7,m6:1582706,m7:7539,m9:1958,s1:1351,s2:11411,s3:0,s4:.084,s5:20,k1:0,k2:0,k3:0,k4:0,k5:0,k6:0,k7:0,k8:0,k9:11.1,k10:0,k11:7,k12:0,k13:44.4,h1:0,h2:0,h3:3.9,h4:0,h5:0,h6:0,h7:72.1,h8:100,g1:889,g2:1,g3:1936,g4:1251,g5:0,g6:0,g7:236682,g8:2.7,g9:5.1,g10:38.3,g11:42.3,g12:.2,g13:1099,g14:0,g15:60,g17:29.4,w1:36.3,w2:12,w3:409,w4:1.5,w5:51.6,w6:1.5,w7:35.4,w8:0,w9:13.7,w18:24.1,w10:36.3,w11:0,w14:4.5,w15:15.9,w17:715,w16:23},geometry:{type:"MultiPolygon",coordinates:[[[[-80.854441,35.223304],[-80.855187,35.222785],[-80.854807,35.222461],[-80.854252,35.221945],[-80.854164,35.221853],[-80.854049,35.221708],[-80.853953,35.221555],[-80.853876,35.221389],[-80.853614,35.22073],[-80.853506,35.220547],[-80.853379,35.220379],[-80.853237,35.220229],[-80.85302,35.220045],[-80.852578,35.2196],[-80.85199,35.21905],[-80.85137,35.218458],[-80.851393,35.218442],[-80.851656,35.218245],[-80.851793,35.218142],[-80.85215,35.217899],[-80.852631,35.217571],[-80.853101,35.21725],[-80.853939,35.216679],[-80.853993,35.216642],[-80.855758,35.215318],[-80.856785,35.214548],[-80.856835,35.214586],[-80.857003,35.214699],[-80.857099,35.214762],[-80.858307,35.215328],[-80.860692,35.216434],[-80.860021,35.217408],[-80.859569,35.218064],[-80.859294,35.218454],[-80.860292,35.219052],[-80.860509,35.219195],[-80.86057,35.21925],[-80.860971,35.219693],[-80.862014,35.220914],[-80.862985,35.222043],[-80.863927,35.223151],[-80.864026,35.223148],[-80.864331,35.223129],[-80.864844,35.223088],[-80.866237,35.222971],[-80.866372,35.222964],[-80.866542,35.222966],[-80.866712,35.22298],[-80.866879,35.223007],[-80.866983,35.22303],[-80.866831,35.223194],[-80.866775,35.223249],[-80.866327,35.223687],[-80.865747,35.224203],[-80.865682,35.224258],[-80.865533,35.224385],[-80.865322,35.224565],[-80.864832,35.224963],[-80.864738,35.22504],[-80.864547,35.225189],[-80.864383,35.225317],[-80.864227,35.225438],[-80.863548,35.225932],[-80.86291,35.226391],[-80.862699,35.22653],[-80.862542,35.226652],[-80.862313,35.226831],[-80.862023,35.227063],[-80.861888,35.227172],[-80.861501,35.227544],[-80.861341,35.227723],[-80.861252,35.227808],[-80.861115,35.227983],[-80.861002,35.228121],[-80.860869,35.228305],[-80.860694,35.228551],[-80.860624,35.228655],[-80.860516,35.228847],[-80.860434,35.229011],[-80.860295,35.228986],[-80.860168,35.228952],[-80.860057,35.228917],[-80.859935,35.228871],[-80.85985,35.22884],[-80.859821,35.228828],[-80.859722,35.228783],[-80.859633,35.22874],[-80.858998,35.228399],[-80.858423,35.22808],[-80.857789,35.22773],[-80.857692,35.227672],[-80.857624,35.227624],[-80.857531,35.227551],[-80.857152,35.227247],[-80.856831,35.226998],[-80.856735,35.226899],[-80.856655,35.226807],[-80.856462,35.226561],[-80.85582,35.225743],[-80.855571,35.225428],[-80.855499,35.225336],[-80.855197,35.224986],[-80.855133,35.224916],[-80.854866,35.224625],[-80.85463,35.224383],[-80.854372,35.224119],[-80.854258,35.224003],[-80.854213,35.223957],[-80.853939,35.22365],[-80.854441,35.223304]]]]}},{type:"Feature",properties:{id:388,p1:1473,p2:32,p3:397,p4:92.7,p5:2.1,p7:100,p8:31.4,p9:65.2,p10:1,p11:.5,p12:1.4,p13:2.4,e1:80.8,e3:3,e5:0,e7:0,m1:52303,m2:12.4,m3:43.8,m4:30.1,m5:13.3,m6:1275563,m7:0,m9:1974,s1:1494,s2:7807,s3:338,s4:.035,s5:181,k1:2,k2:1,k3:58.7,k4:65.1,k5:57.1,k6:57.1,k7:55,k8:68.8,k9:21.5,k10:11.9,k11:13.6,k12:7.4,k13:59,h1:6.8,h2:7.7,h3:21.2,h4:65,h5:0,h6:0,h7:99,h8:38.6,g1:839,g2:60,g3:1943,g4:1297,g5:1,g6:15,g7:158580,g8:13.3,g9:1.7,g10:18.6,g11:42.2,g12:1.9,g13:712,g14:7,g15:296,g17:48.9,w1:71.2,w2:19.4,w3:844,w4:1.9,w5:64.8,w6:1.6,w7:24.1,w8:24,w9:45.7,w18:66.8,w10:30.7,w11:39.5,w14:4.6,w15:2.5,w17:960,w16:55},geometry:{type:"MultiPolygon",coordinates:[[[[-80.862014,35.220914],[-80.860971,35.219693],[-80.86057,35.21925],[-80.860509,35.219195],[-80.860292,35.219052],[-80.859294,35.218454],[-80.859569,35.218064],[-80.860021,35.217408],[-80.860692,35.216434],[-80.858307,35.215328],[-80.857099,35.214762],[-80.857003,35.214699],[-80.856835,35.214586],[-80.856785,35.214548],[-80.857693,35.213642],[-80.85774,35.213586],[-80.858664,35.212477],[-80.858693,35.212442],[-80.859493,35.211542],[-80.860383,35.210354],[-80.860433,35.210409],[-80.860472,35.210441],[-80.860548,35.210489],[-80.860608,35.210517],[-80.860659,35.210535],[-80.860765,35.210559],[-80.861889,35.210672],[-80.864355,35.21093],[-80.864603,35.210951],[-80.865566,35.211048],[-80.866232,35.211125],[-80.86655,35.211155],[-80.86667,35.211165],[-80.867033,35.211205],[-80.867722,35.211269],[-80.868011,35.211287],[-80.868335,35.211291],[-80.868658,35.211277],[-80.868973,35.21125],[-80.869399,35.211204],[-80.870857,35.211075],[-80.87141,35.211017],[-80.871627,35.211009],[-80.871725,35.211013],[-80.871827,35.211024],[-80.872059,35.21106],[-80.872287,35.211113],[-80.872628,35.211216],[-80.873277,35.210577],[-80.87351,35.210339],[-80.874174,35.209703],[-80.874318,35.209916],[-80.874484,35.210192],[-80.874633,35.210476],[-80.87474,35.210712],[-80.874827,35.210928],[-80.874907,35.211158],[-80.874984,35.211421],[-80.87504,35.211573],[-80.875083,35.211678],[-80.875171,35.211867],[-80.875217,35.211955],[-80.875285,35.212075],[-80.875345,35.212173],[-80.875424,35.212292],[-80.875507,35.212408],[-80.875641,35.212578],[-80.875731,35.212681],[-80.875837,35.212795],[-80.875995,35.21295],[-80.876107,35.213049],[-80.876222,35.213145],[-80.876311,35.213215],[-80.876402,35.213283],[-80.876517,35.213363],[-80.876591,35.213414],[-80.876705,35.213486],[-80.876788,35.213535],[-80.876993,35.213649],[-80.877204,35.213753],[-80.877349,35.213817],[-80.877496,35.213877],[-80.877594,35.213915],[-80.877722,35.21396],[-80.878029,35.214054],[-80.87821,35.214101],[-80.878892,35.214245],[-80.878594,35.214582],[-80.878488,35.214674],[-80.87837,35.214743],[-80.878291,35.214782],[-80.878186,35.214827],[-80.878079,35.214867],[-80.877374,35.215103],[-80.877226,35.215171],[-80.877156,35.215211],[-80.876952,35.215345],[-80.876827,35.215422],[-80.87672,35.215477],[-80.87657,35.215534],[-80.876452,35.215568],[-80.876369,35.215592],[-80.875483,35.215798],[-80.875224,35.215874],[-80.875059,35.215939],[-80.874904,35.21602],[-80.874619,35.216192],[-80.874373,35.216354],[-80.874281,35.216423],[-80.874183,35.216519],[-80.873411,35.217453],[-80.873317,35.217573],[-80.873251,35.21768],[-80.873211,35.217757],[-80.872588,35.217789],[-80.872273,35.217805],[-80.87217,35.217806],[-80.871968,35.2178],[-80.871782,35.217783],[-80.871689,35.218026],[-80.871524,35.218379],[-80.871456,35.218509],[-80.871305,35.218764],[-80.871222,35.218889],[-80.870973,35.219225],[-80.870725,35.21952],[-80.870492,35.219757],[-80.870185,35.220047],[-80.869481,35.220691],[-80.868567,35.221537],[-80.868096,35.221969],[-80.867908,35.222142],[-80.867767,35.222269],[-80.867292,35.222697],[-80.866983,35.22303],[-80.866879,35.223007],[-80.866712,35.22298],[-80.866542,35.222966],[-80.866372,35.222964],[-80.866237,35.222971],[-80.864844,35.223088],[-80.864331,35.223129],[-80.864026,35.223148],[-80.863927,35.223151],[-80.862985,35.222043],[-80.862014,35.220914]]]]}}]};

      function initialize() {
        geocoder = new google.maps.Geocoder();
        $('#submit').on('click', function(e){
          e.preventDefault();
          codeAddress();
        });
        var npaPoly339 = [];
        var npaPoly388 = [];
        var npaPoly378 = [];
        var npaPoly315 = [];
        for (var i=0, iLen=npaData.features.length; i<iLen; i++) {
          if (npaData.features[i].properties.id == 339) {
            npaPoly339.push(npaData.features[i].geometry.coordinates[0][0]);
          }
          if (npaData.features[i].properties.id == 388) {
            npaPoly388.push(npaData.features[i].geometry.coordinates[0][0]);
          }
          if (npaData.features[i].properties.id == 378) {
            npaPoly378.push(npaData.features[i].geometry.coordinates[0][0]);
          }
          if (npaData.features[i].properties.id == 315) {
            npaPoly315.push(npaData.features[i].geometry.coordinates[0][0]);
          }
        }
        newCoords339 = [];
        for (theValue=0; theValue < npaPoly339[0].length; theValue++){
          lat = npaPoly339[0][theValue][0];
          lng = npaPoly339[0][theValue][1];
          var coords = new google.maps.LatLng(lng, lat);
          newCoords339.push(coords);
        }
        newCoords388 = [];
        for (theValue=0; theValue < npaPoly388[0].length; theValue++){
          lat = npaPoly388[0][theValue][0];
          lng = npaPoly388[0][theValue][1];
          var coords = new google.maps.LatLng(lng, lat);
          newCoords388.push(coords);
        }
        newCoords378 = [];
        for (theValue=0; theValue < npaPoly378[0].length; theValue++){
          lat = npaPoly378[0][theValue][0];
          lng = npaPoly378[0][theValue][1];
          var coords = new google.maps.LatLng(lng, lat);
          newCoords378.push(coords);
        }
        newCoords315 = [];
        for (theValue=0; theValue < npaPoly315[0].length; theValue++){
          lat = npaPoly315[0][theValue][0];
          lng = npaPoly315[0][theValue][1];
          var coords = new google.maps.LatLng(lng, lat);
          newCoords315.push(coords);
        }
        npa339 = new google.maps.Polygon({
          paths: newCoords339
        });
        npa388 = new google.maps.Polygon({
          paths: newCoords388
        });
        npa378 = new google.maps.Polygon({
          paths: newCoords378
        });
        npa315 = new google.maps.Polygon({
          paths: newCoords315
        });
      }

      function codeAddress() {
        address = ($('#address').val() + " " + $('#address-line2').val() + ", " + $('#city').val() + ", " + $('#state').val() + " " + $('#zip').val());
        geocoder.geocode( { 'address': address}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            userLocation = results[0].geometry.location;
            compareLocation(userLocation, npa388, npa339, npa315, npa378);
            if(typeof(Storage) !== "undefined") {
                // Code for localStorage/sessionStorage.
                localStorage.setItem("address", $('#address').val());
                localStorage.setItem("address-line2", $('#address-line2').val());
                localStorage.setItem("city", $('#city').val());
                localStorage.setItem("state", $('#state').val());
                localStorage.setItem("zip", $('#zip').val());
                localStorage.setItem("country", "USA");
            } else {
                // Sorry! No Web Storage support..
                console.log("Sorry! No Web Storage support");
            }
          } else {
            alert('Geocode was not successful for the following reason: ' + status);
          }
        });
      }

      var compareLocation = function(u, a, b, c, d) {
        if (google.maps.geometry.poly.containsLocation(u, a) || google.maps.geometry.poly.containsLocation(u, b) || google.maps.geometry.poly.containsLocation(u, c) || google.maps.geometry.poly.containsLocation(u, d)) {
          $('#withinReach').fadeIn();
          $('#enterLocation').hide();
        } else {
          $('#enterLocation').hide();
          $('#outOfReach').fadeIn();
        }
      }
    $('.reloadLink').on('click', function(e){
      e.preventDefault();
      $('#withinReach, #outOfReach').hide();
      $('#enterLocation').fadeToggle();
      $('#address').val('');
    });

    initialize();
    });

    </script>
    <style>
      .content-inner {padding: 0 8% 100px;}
      .results a {
        font-weight: bold;
        border-bottom: 1px dotted #ccc;
      }
      .results a:hover {
        border-bottom: 1px dotted #666;
      }
      #map-canvas {
        width: 300px;
        display: block;
        height: 300px;
      }
    </style></head>

<body>
  <div id="enterLocation">
    <div class="form-wrapper">
      <h2 class="text-align-center">
        Is Crown Town Compost in my neighborhood?
      </h2>
      <form onsubmit="compareLocation(); return false;">
        <div class="field-list clear" style="width: 100%;display: inline-block;">
          <fieldset class="form-item fields address required">
            <div class="title">Address</div>
            <legend>Address</legend>
            <div class="field address1">
              <label class="caption"><input id="address" class="field-element field-control" name="address" x-autocompletetype="address-line1" type="text" spellcheck="false" data-title="Line1">
                Address 1</label>
            </div>
            <div class="field address2">
              <label class="caption"><input id="address-line2" class="field-element field-control" name="address2" x-autocompletetype="address-line2" type="text" spellcheck="false" data-title="Line2">
                Address 2</label>
            </div>
            <div class="field city">
              <label class="caption"><input id="city" class="field-element field-control" name="city" x-autocompletetype="city" type="text" spellcheck="false" data-title="City">
                City</label>
            </div>
            <div class="field state-province">
              <label class="caption"><input id="state" class="field-element field-control" name="state" x-autocompletetype="state" type="text" spellcheck="false" data-title="State">
                State/Province</label>
            </div>
            <div class="field zip">
              <label class="caption"><input id="zip" class="field-element field-control" name="zipcode" x-autocompletetype="postal-code" type="text" spellcheck="false" data-title="Zip">
                Zip/Postal Code</label>
            </div>
          </fieldset>
        </div>
        <div class="form-button-wrapper form-button-wrapper--align-center">
          <input class="button sqs-system-button sqs-editable-button" id="submit" type="submit" value="Check My Address" />
        </div>
      </form>
    </div>
  </div>
  <div class="results" id="withinReach" style="display: none;">
    <h2 class="text-align-center">Good news! We're in your neighborhood.</h2>
    <p class="text-align-center"><a href="/sign-up-options">Sign up now</a> and start composting or <a href="/contact-us">contact us</a> if you have questions.</p>
    <p class="text-align-center"><a href="#" class="reloadLink"><i class="fa fa-arrow-circle-o-left" style="margin-right: 10px; margin-top: 30px;"></i>Check another location.</a></p>
  </div>
  <div class="results" id="outOfReach" style="display: none;">
    <h2 class="text-align-center">Bummer! You're just out of reach.</h2>
    <p class="text-align-center">We're growing quickly. <a href="/contact-us">Send us your information</a> so we can contact you when we start operating in your area.</p>
    <p class="text-align-center"><a href="#" class="reloadLink"><i class="fa fa-arrow-circle-o-left" style="margin-right: 10px; margin-top: 30px;"></i>Check another location.</a></p>
  </div>
</body>
